import{_ as e,r as t,o,c,b as l,w as r,F as u,e as a,a as n,d as s}from"./app.d4a0a1d1.js";const i={},k=a(`<h1 id="\u7B2C-3-\u7AE0-vue-js-3-\u7684\u8BBE\u8BA1\u601D\u8DEF" tabindex="-1"><a class="header-anchor" href="#\u7B2C-3-\u7AE0-vue-js-3-\u7684\u8BBE\u8BA1\u601D\u8DEF" aria-hidden="true">#</a> \u7B2C 3 \u7AE0 Vue.js 3 \u7684\u8BBE\u8BA1\u601D\u8DEF</h1><h2 id="_3-1-\u58F0\u660E\u5F0F\u5730\u63CF\u8FF0-ui" tabindex="-1"><a class="header-anchor" href="#_3-1-\u58F0\u660E\u5F0F\u5730\u63CF\u8FF0-ui" aria-hidden="true">#</a> 3.1 \u58F0\u660E\u5F0F\u5730\u63CF\u8FF0 UI</h2><p>Vue.js 3 \u7684\u58F0\u660E\u5F0F\u89E3\u51B3\u65B9\u6848</p><ul><li>\u4F7F\u7528\u4E0E HTML \u6807\u7B7E \u4E00\u81F4\u7684\u65B9\u5F0F\u63CF\u8FF0<strong>DOM \u5143\u7D20</strong></li><li>\u4F7F\u7528\u4E0E HTML \u6807\u7B7E \u4E00\u81F4\u7684\u65B9\u5F0F\u63CF\u8FF0<strong>\u5C5E\u6027</strong></li><li>\u4F7F\u7528<code>:</code>\u6216<code>v-bind</code>\u63CF\u8FF0\u52A8\u6001\u7ED1\u5B9A\u7684<strong>\u5C5E\u6027</strong></li><li>\u4F7F\u7528<code>@</code>\u6216<code>v-on</code>\u6765\u63CF\u8FF0<strong>\u4E8B\u4EF6</strong></li><li>\u4F7F\u7528\u4E0E HTML \u6807\u7B7E \u4E00\u81F4\u7684\u65B9\u5F0F\u63CF\u8FF0<strong>\u5C42\u7EA7\u7ED3\u6784</strong></li></ul><p>\u9664\u4E86\u4F7F\u7528<strong>\u6A21\u677F</strong>\u6765\u58F0\u660E\u5F0F\u5730\u63CF\u8FF0 UI \u4E4B\u5916\uFF0C\u6211\u4EEC\u8FD8\u53EF\u4EE5\u7528 JavaScript \u5BF9\u8C61\u6765\u63CF\u8FF0\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u6807\u7B7E\u540D\u79F0</span>
  <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">&#39;h1&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// \u6807\u7B7E\u5C5E\u6027</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">onClick</span><span class="token operator">:</span> handler<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// \u5B50\u8282\u70B9</span>
  <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">&#39;span&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>\u5BF9\u5E94\u7684 Vue.js \u6A21\u677F\uFF1A</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handler<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u5982\u679C\u8981\u52A8\u6001\u751F\u6210 <code>h1</code>- <code>h6</code> \u6807\u7B7E\u7684\u8BDD\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u4E00\u4E2A\u53D8\u91CF <code>tag: h\${level}</code>\uFF0C\u8FD9\u65F6 JavaScript \u7684\u5F62\u5F0F\u5C31\u6BD4\u8F83\u7075\u6D3B\u3002</p><p>Vue.js 3 \u9664\u4E86\u652F\u6301\u4F7F\u7528\u6A21\u677F\u63CF\u8FF0 UI \u5916\uFF0C \u8FD8\u652F\u6301\u4F7F\u7528\u865A\u62DF DOM \u63CF\u8FF0 UI \u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;h1&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">onClick</span><span class="token operator">:</span> handler <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// \u865A\u62DF DOM</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u7B49\u4EF7\u4E8E\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">&#39;h1&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">onClick</span><span class="token operator">:</span> handler<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u4E0A\u9762\u7684 <code>h</code> \u51FD\u6570\u662F\u4E00\u4E2A\u8F85\u52A9\u521B\u5EFA\u865A\u62DF DOM \u7684\u5DE5\u5177\u51FD\u6570\u3002Vue.js \u4F1A\u6839\u636E\u7EC4\u4EF6\u7684<strong>\u6E32\u67D3\u51FD\u6570</strong>\u7684\u8FD4\u56DE\u503C\u62FF\u5230\u865A\u62DF DOM\uFF0C\u7136\u540E\u628A\u7EC4\u4EF6\u7684\u5185\u5BB9\u6E32\u67D3\u51FA\u6765\u3002 \u4E0A\u9762\u4EE3\u7801\u4E2D\u7684<code>render</code>\u51FD\u6570\u5C31\u662F\u6E32\u67D3\u51FD\u6570\u3002</p><h2 id="_3-2-\u521D\u8BC6\u6E32\u67D3\u5668" tabindex="-1"><a class="header-anchor" href="#_3-2-\u521D\u8BC6\u6E32\u67D3\u5668" aria-hidden="true">#</a> 3.2 \u521D\u8BC6\u6E32\u67D3\u5668</h2><p>\u865A\u62DF DOM \u662F JavaScript \u5BF9\u8C61\u6765\u63CF\u8FF0\u771F\u5B9E DOM \u7ED3\u6784\uFF0C\u7136\u540E\u901A\u8FC7<strong>\u6E32\u67D3\u5668</strong>\u5C06\u865A\u62DF DOM \u6E32\u67D3\u6210\u771F\u5B9E DOM\u3002</p><p>\u6E32\u67D3\u5668\u975E\u5E38\u91CD\u8981\uFF0C\u5927\u5BB6\u5E73\u65F6\u7F16\u5199\u7684 Vue.js \u7EC4\u4EF6\u90FD\u662F\u4F9D\u8D56\u6E32\u67D3\u5668\u6765\u5DE5\u4F5C\u7684\u3002</p><p>\u5047\u8BBE\u6211\u4EEC\u6709\u5982\u4E0B\u7684\u865A\u62DF DOM:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token string">&#39;click me&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u63A5\u4E0B\u6765\uFF0C\u7F16\u5199\u4E00\u4E2A<strong>\u6E32\u67D3\u5668</strong>\uFF0C\u628A\u4E0A\u9762\u7684\u865A\u62DF DOM \u6E32\u67D3\u4E3A\u771F\u5B9E DOM:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">renderer</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u4F7F\u7528vnode.tag\u4F5C\u4E3A\u6807\u7B7E\u540D\u79F0\u521B\u5EFA DOM</span>
  <span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>tag<span class="token punctuation">)</span>
  <span class="token comment">// \u904D\u5386 vnode.props\uFF0C\u5C06\u5C5E\u6027\uFF0C\u4E8B\u4EF6\u6DFB\u52A0\u5230 DOM \u5143\u7D20</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> vnode<span class="token punctuation">.</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^on</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5982\u679C key \u4EE5 on \u5F00\u5934\uFF0C\u8BF4\u660E\u662F\u4E8B\u4EF6</span>
      el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
        key<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// \u4E8B\u4EF6\u540D\u79F0 onClick -&gt; click</span>
        vnode<span class="token punctuation">.</span>props<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token comment">// \u4E8B\u4EF6\u5904\u7406\u51FD\u6570</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u5904\u7406 children</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vnode<span class="token punctuation">.</span>children <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5982\u679C children \u662F \u5B57\u7B26\u4E32\uFF0C\u8BF4\u660E\u5B83\u662F\u6587\u672C\u5B50\u8282\u70B9</span>
    el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u9012\u5F52\u8C03\u7528 renderer \u51FD\u6570\uFF0C\u6E32\u67D3\u5B50\u8282\u70B9</span>
    node<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">renderer</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> el<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u5C06\u5143\u7D20\u6DFB\u52A0\u5230\u6302\u8F7D\u70B9\u4E0B</span>
  container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>\u4F7F\u7528\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">renderer</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="custom-container note"><p class="custom-container-title">\u6267\u884C\u6548\u679C</p><div id="renderer-demo1"></div></div>`,24),d=n("div",{class:"language-html ext-html line-numbers-mode"},[n("pre",{class:"language-html"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("div")]),s(),n("span",{class:"token attr-name"},"id"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("renderer-demo1"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("div")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br")])],-1),b=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" vnode "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"tag"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'div'"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token literal-property property"},"props"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function-variable function"},"onClick"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token function"},"alert"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'hello'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token literal-property property"},"children"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'click me'"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"renderer"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("vnode"),n("span",{class:"token punctuation"},","),s(" container")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"// \u4F7F\u7528vnode.tag\u4F5C\u4E3A\u6807\u7B7E\u540D\u79F0\u521B\u5EFA DOM"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" el "),n("span",{class:"token operator"},"="),s(" window"),n("span",{class:"token punctuation"},"."),s("document"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createElement"),n("span",{class:"token punctuation"},"("),s("vnode"),n("span",{class:"token punctuation"},"."),s("tag"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token comment"},"// \u904D\u5386 vnode.props\uFF0C\u5C06\u5C5E\u6027\uFF0C\u4E8B\u4EF6\u6DFB\u52A0\u5230 DOM \u5143\u7D20"),s(`
  `),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"const"),s(" key "),n("span",{class:"token keyword"},"in"),s(" vnode"),n("span",{class:"token punctuation"},"."),s("props"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"^on"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"test"),n("span",{class:"token punctuation"},"("),s("key"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token comment"},"// \u5982\u679C key \u4EE5 on \u5F00\u5934\uFF0C\u8BF4\u660E\u662F\u4E8B\u4EF6"),s(`
      el`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"addEventListener"),n("span",{class:"token punctuation"},"("),s(`
        key`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"substr"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toLowerCase"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// \u4E8B\u4EF6\u540D\u79F0 onClick -> click"),s(`
        vnode`),n("span",{class:"token punctuation"},"."),s("props"),n("span",{class:"token punctuation"},"["),s("key"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token comment"},"// \u4E8B\u4EF6\u5904\u7406\u51FD\u6570"),s(`
      `),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token comment"},"// \u5904\u7406 children"),s(`
  `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"typeof"),s(" vnode"),n("span",{class:"token punctuation"},"."),s("children "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'string'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// \u5982\u679C children \u662F \u5B57\u7B26\u4E32\uFF0C\u8BF4\u660E\u5B83\u662F\u6587\u672C\u5B50\u8282\u70B9"),s(`
    el`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"appendChild"),n("span",{class:"token punctuation"},"("),s("window"),n("span",{class:"token punctuation"},"."),s("document"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createTextNode"),n("span",{class:"token punctuation"},"("),s("vnode"),n("span",{class:"token punctuation"},"."),s("children"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("Array"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"isArray"),n("span",{class:"token punctuation"},"("),s("vnode"),n("span",{class:"token punctuation"},"."),s("children"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// \u9012\u5F52\u8C03\u7528 renderer \u51FD\u6570\uFF0C\u6E32\u67D3\u5B50\u8282\u70B9"),s(`
    node`),n("span",{class:"token punctuation"},"."),s("children"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forEach"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"child"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token function"},"renderer"),n("span",{class:"token punctuation"},"("),s("child"),n("span",{class:"token punctuation"},","),s(" el"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token comment"},"// \u5C06\u5143\u7D20\u6DFB\u52A0\u5230\u6302\u8F7D\u70B9\u4E0B"),s(`
  container`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"appendChild"),n("span",{class:"token punctuation"},"("),s("el"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token function"},"renderer"),n("span",{class:"token punctuation"},"("),s("vnode"),n("span",{class:"token punctuation"},","),s(" window"),n("span",{class:"token punctuation"},"."),s("document"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"querySelector"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'#renderer-demo1'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br")])],-1),m=a(`<h2 id="_3-3-\u7EC4\u4EF6\u7684\u672C\u8D28" tabindex="-1"><a class="header-anchor" href="#_3-3-\u7EC4\u4EF6\u7684\u672C\u8D28" aria-hidden="true">#</a> 3.3 \u7EC4\u4EF6\u7684\u672C\u8D28</h2><p>\u4E00\u53E5\u8BDD\u603B\u7ED3\uFF1A<strong>\u7EC4\u4EF6\u5C31\u662F\u4E00\u7EC4 DOM \u5143\u7D20\u7684\u5C01\u88C5</strong>\u3002</p><p>\u8FD9\u7EC4 DOM \u5143\u7D20\u5C31\u662F\u7EC4\u4EF6\u8981\u6E32\u67D3\u7684\u5185\u5BB9\uFF0C\u56E0\u6B64\u6211\u4EEC\u53EF\u4EE5\u5B9A\u4E49\u4E00\u4E2A\u51FD\u6570\u6765\u4EE3\u8868\u7EC4\u4EF6\uFF0C\u800C\u51FD\u6570\u7684\u8FD4\u56DE\u503C\u5C31\u4EE3\u8868\u7EC4\u4EF6\u8981\u6E32\u67D3\u7684\u5185\u5BB9\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">MyComponent</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">onClick</span><span class="token operator">:</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token string">&#39;click me&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u7528\u865A\u62DF DOM \u6765\u63CF\u8FF0\u7EC4\u4EF6\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">tag</span><span class="token operator">:</span> MyComponent<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u5C31\u60F3 <code>tag: &#39;div&#39;</code> \u4E00\u6837\uFF0C\u7528 <code>tag: MyComponent</code> \u6765\u63CF\u8FF0\u7EC4\u4EF6\u3002\u4E3A\u4E86\u80FD\u6E32\u67D3\u7EC4\u4EF6\uFF0C\u4FEE\u6539\u524D\u9762\u7684 renderer \u51FD\u6570\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">renderer</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vnode<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u8BF4\u660E vnode \u63CF\u8FF0\u7684\u662F\u5143\u7D20</span>
    <span class="token function">mountElement</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> container<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vnode<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u8BF4\u660E vnode \u63CF\u8FF0\u7684\u662F\u7EC4\u4EF6</span>
    <span class="token function">mountComponent</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> container<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div>`,8);function g(v,y){const p=t("CodeDemo");return o(),c(u,null,[k,l(p,{id:"code-demo-88a8a2e4",title:"%E6%B8%B2%E6%9F%93%E5%99%A8%E7%A4%BA%E4%BE%8B",code:"%7B%22html%22%3A%22%3Cdiv%20id%3D%5C%22renderer-demo1%5C%22%3E%3C%2Fdiv%3E%5Cn%22%2C%22js%22%3A%22const%20vnode%20%3D%20%7B%5Cn%20%20tag%3A%20'div'%2C%5Cn%20%20props%3A%20%7B%5Cn%20%20%20%20onClick%3A%20()%20%3D%3E%20alert('hello')%2C%5Cn%20%20%7D%2C%5Cn%20%20children%3A%20'click%20me'%2C%5Cn%7D%5Cn%5Cnfunction%20renderer(vnode%2C%20container)%20%7B%5Cn%20%20%2F%2F%20%E4%BD%BF%E7%94%A8vnode.tag%E4%BD%9C%E4%B8%BA%E6%A0%87%E7%AD%BE%E5%90%8D%E7%A7%B0%E5%88%9B%E5%BB%BA%20DOM%5Cn%20%20const%20el%20%3D%20window.document.createElement(vnode.tag)%5Cn%20%20%2F%2F%20%E9%81%8D%E5%8E%86%20vnode.props%EF%BC%8C%E5%B0%86%E5%B1%9E%E6%80%A7%EF%BC%8C%E4%BA%8B%E4%BB%B6%E6%B7%BB%E5%8A%A0%E5%88%B0%20DOM%20%E5%85%83%E7%B4%A0%5Cn%20%20for%20(const%20key%20in%20vnode.props)%20%7B%5Cn%20%20%20%20if%20(%2F%5Eon%2F.test(key))%20%7B%5Cn%20%20%20%20%20%20%2F%2F%20%E5%A6%82%E6%9E%9C%20key%20%E4%BB%A5%20on%20%E5%BC%80%E5%A4%B4%EF%BC%8C%E8%AF%B4%E6%98%8E%E6%98%AF%E4%BA%8B%E4%BB%B6%5Cn%20%20%20%20%20%20el.addEventListener(%5Cn%20%20%20%20%20%20%20%20key.substr(2).toLowerCase()%2C%20%2F%2F%20%E4%BA%8B%E4%BB%B6%E5%90%8D%E7%A7%B0%20onClick%20-%3E%20click%5Cn%20%20%20%20%20%20%20%20vnode.props%5Bkey%5D%20%2F%2F%20%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%5Cn%20%20%20%20%20%20)%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%5Cn%20%20%2F%2F%20%E5%A4%84%E7%90%86%20children%5Cn%20%20if%20(typeof%20vnode.children%20%3D%3D%3D%20'string')%20%7B%5Cn%20%20%20%20%2F%2F%20%E5%A6%82%E6%9E%9C%20children%20%E6%98%AF%20%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E8%AF%B4%E6%98%8E%E5%AE%83%E6%98%AF%E6%96%87%E6%9C%AC%E5%AD%90%E8%8A%82%E7%82%B9%5Cn%20%20%20%20el.appendChild(window.document.createTextNode(vnode.children))%5Cn%20%20%7D%20else%20if%20(Array.isArray(vnode.children))%20%7B%5Cn%20%20%20%20%2F%2F%20%E9%80%92%E5%BD%92%E8%B0%83%E7%94%A8%20renderer%20%E5%87%BD%E6%95%B0%EF%BC%8C%E6%B8%B2%E6%9F%93%E5%AD%90%E8%8A%82%E7%82%B9%5Cn%20%20%20%20node.children.forEach((child)%20%3D%3E%20renderer(child%2C%20el))%5Cn%20%20%7D%5Cn%5Cn%20%20%2F%2F%20%E5%B0%86%E5%85%83%E7%B4%A0%E6%B7%BB%E5%8A%A0%E5%88%B0%E6%8C%82%E8%BD%BD%E7%82%B9%E4%B8%8B%5Cn%20%20container.appendChild(el)%5Cn%7D%5Cn%5Cnrenderer(vnode%2C%20window.document.querySelector('%23renderer-demo1'))%5Cn%22%7D"},{default:r(()=>[d,b]),_:1}),m],64)}var h=e(i,[["render",g],["__file","chapter03.html.vue"]]);export{h as default};
