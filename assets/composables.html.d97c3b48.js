import{r as p,o as l,c as u,b as a,w as t,F as r,f as i,a as n,d as s}from"./app.d90b9525.js";import{_ as k}from"./plugin-vue_export-helper.21dcd24c.js";const m={},b=i('<h1 id="\u7EC4\u5408\u5F0F\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u7EC4\u5408\u5F0F\u51FD\u6570" aria-hidden="true">#</a> \u7EC4\u5408\u5F0F\u51FD\u6570</h1><h2 id="\u4EC0\u4E48\u662F-\u7EC4\u5408\u5F0F\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u4EC0\u4E48\u662F-\u7EC4\u5408\u5F0F\u51FD\u6570" aria-hidden="true">#</a> \u4EC0\u4E48\u662F\u201C\u7EC4\u5408\u5F0F\u51FD\u6570\u201D\uFF1F</h2><p>\u5728 Vue \u5E94\u7528\u7684\u6982\u5FF5\u4E2D\uFF0C\u201C\u7EC4\u5408\u5F0F\u51FD\u6570\u201D\u662F\u4E00\u4E2A\u5229\u7528 Vue \u7EC4\u5408\u5F0F API \u6765\u5C01\u88C5\u548C\u590D\u7528<strong>\u6709\u72B6\u6001\u903B\u8F91</strong>\u7684\u51FD\u6570\u3002</p><p>\u5F53\u6784\u5EFA\u524D\u7AEF\u5E94\u7528\u65F6\uFF0C\u6211\u4EEC\u5E38\u5E38\u9700\u8981\u590D\u7528\u516C\u5171\u4EFB\u52A1\u7684\u903B\u8F91\uFF0C\u53EF\u4EE5\u5C01\u88C5\u4E3A<strong>\u65E0\u72B6\u6001\u7684\u903B\u8F91</strong>\u3002\u6709\u72B6\u6001\u903B\u8F91\u8D1F\u8D23\u7BA1\u7406\u4F1A\u968F\u65F6\u95F4\u800C\u53D8\u5316\u7684\u72B6\u6001\u3002</p><h2 id="\u9F20\u6807\u8DDF\u8E2A\u5668\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u9F20\u6807\u8DDF\u8E2A\u5668\u793A\u4F8B" aria-hidden="true">#</a> \u9F20\u6807\u8DDF\u8E2A\u5668\u793A\u4F8B</h2><p>\u5982\u679C\u6211\u4EEC\u60F3\u5728\u591A\u4E2A\u7EC4\u4EF6\u4E2D\u590D\u7528\u8FD9\u4E2A\u76F8\u540C\u7684\u903B\u8F91\uFF0C\u6211\u4EEC\u53EF\u4EE5\u628A\u8FD9\u4E2A\u903B\u8F91\u4EE5\u4E00\u4E2A\u7EC4\u5408\u5F0F\u51FD\u6570\u7684\u5F62\u5F0F\u63D0\u53D6\u5230\u5916\u90E8\u6587\u4EF6\u4E2D\u3002</p>',6),d=n("div",{class:"language-vue ext-vue line-numbers-mode"},[n("pre",{class:"language-vue"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("script")]),s(),n("span",{class:"token attr-name"},"setup"),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"},[n("span",{class:"token language-javascript"},[s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" useMouse "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./mouse.js'"),s(`

`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" x"),n("span",{class:"token punctuation"},","),s(" y "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"useMouse"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("script")]),n("span",{class:"token punctuation"},">")]),s(`

`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("template")]),n("span",{class:"token punctuation"},">")]),s(`
  Mouse position is at {{ x }}, {{ y }}
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("template")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br")])],-1),C=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" ref"),n("span",{class:"token punctuation"},","),s(" onMounted"),n("span",{class:"token punctuation"},","),s(" onUnmounted "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'vue'"),s(`

`),n("span",{class:"token comment"},"// \u6309\u7167\u60EF\u4F8B\uFF0C\u7EC4\u5408\u5F0F\u51FD\u6570\u540D\u4EE5 use \u5F00\u5934"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"useMouse"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"// \u88AB\u7EC4\u5408\u5F0F\u5C01\u88C5\u548C\u7BA1\u7406\u7684\u72B6\u6001"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" x "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"ref"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" y "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"ref"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),s(`

  `),n("span",{class:"token comment"},"// \u7EC4\u5408\u5F0F\u51FD\u6570\u53EF\u4EE5\u968F\u65F6\u6539\u53D8\u5176\u7BA1\u7406\u7684\u72B6\u6001"),s(`
  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"update"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"event"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    x`),n("span",{class:"token punctuation"},"."),s("value "),n("span",{class:"token operator"},"="),s(" event"),n("span",{class:"token punctuation"},"."),s(`pageX
    y`),n("span",{class:"token punctuation"},"."),s("value "),n("span",{class:"token operator"},"="),s(" event"),n("span",{class:"token punctuation"},"."),s(`pageY
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token comment"},"// a composable can also hook into its owner component's"),s(`
  `),n("span",{class:"token comment"},"// lifecycle to setup and teardown side effects."),s(`
  `),n("span",{class:"token function"},"onMounted"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    window`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"addEventListener"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'mousemove'"),n("span",{class:"token punctuation"},","),s(" update"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token function"},"onUnmounted"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    window`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"removeEventListener"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'mousemove'"),n("span",{class:"token punctuation"},","),s(" update"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

  `),n("span",{class:"token comment"},"// expose managed state as return value"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(" x"),n("span",{class:"token punctuation"},","),s(" y "),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br")])],-1),f=n("p",null,"\u5982\u4F60\u6240\u89C1\uFF0C\u6838\u5FC3\u903B\u8F91\u4E00\u70B9\u90FD\u6CA1\u6709\u88AB\u6539\u53D8\uFF0C\u6211\u4EEC\u505A\u7684\u53EA\u662F\u628A\u5B83\u79FB\u5230\u4E00\u4E2A\u5916\u90E8\u51FD\u6570\u4E2D\u53BB\uFF0C\u5E76\u8FD4\u56DE\u9700\u8981\u66B4\u9732\u7684\u72B6\u6001\u3002 \u7136\u800C\u66F4\u9177\u7684\u4E00\u70B9\u662F\uFF0C\u4F60\u8FD8\u53EF\u4EE5\u5D4C\u5957\u591A\u4E2A\u7EC4\u5408\u5F0F\u51FD\u6570\uFF1A\u4E00\u4E2A\u7EC4\u5408\u5F0F\u51FD\u6570\u53EF\u4EE5\u8C03\u7528\u4E00\u4E2A\u6216\u591A\u4E2A\u5176\u4ED6\u7684\u7EC4\u5408\u5F0F\u51FD\u6570\u3002 \u8FD9\u4F7F\u5F97\u6211\u4EEC\u53EF\u4EE5\u50CF\u4F7F\u7528\u591A\u4E2A\u7EC4\u4EF6\u7EC4\u5408\u6210\u6574\u4E2A\u5E94\u7528\u4E00\u6837\uFF0C\u7528\u591A\u4E2A\u8F83\u5C0F\u4E14\u903B\u8F91\u72EC\u7ACB\u7684\u5355\u5143\u6765\u7EC4\u5408\u5F62\u6210\u590D\u6742\u7684\u903B\u8F91\u3002 \u5B9E\u9645\u4E0A\uFF0C\u8FD9\u6B63\u662F\u6211\u4EEC\u51B3\u5B9A\u5C06\u5B9E\u73B0\u4E86\u8FD9\u4E00\u8BBE\u8BA1\u6A21\u5F0F\u7684 API \u96C6\u5408\u547D\u540D\u4E3A\u7EC4\u5408\u5F0F API \u7684\u539F\u56E0\u3002",-1),E=n("p",null,"\u4E3E\u4E2A\u4F8B\u5B50\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C06\u6DFB\u52A0\u548C\u6E05\u9664 DOM \u4E8B\u4EF6\u76D1\u542C\u5668\u7684\u903B\u8F91\u653E\u5165\u4E00\u4E2A\u7EC4\u5408\u5F0F\u51FD\u6570\u4E2D\uFF1A",-1),v=n("div",{class:"language-vue ext-vue line-numbers-mode"},[n("pre",{class:"language-vue"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("script")]),s(),n("span",{class:"token attr-name"},"setup"),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"},[n("span",{class:"token language-javascript"},[s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" useMouse "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./mouse.js'"),s(`

`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" x"),n("span",{class:"token punctuation"},","),s(" y "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"useMouse"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("script")]),n("span",{class:"token punctuation"},">")]),s(`

`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("template")]),n("span",{class:"token punctuation"},">")]),s(`
  Mouse position is at {{ x }}, {{ y }}
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("template")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br")])],-1),g=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" ref"),n("span",{class:"token punctuation"},","),s(" onMounted"),n("span",{class:"token punctuation"},","),s(" onUnmounted "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'vue'"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" useEventListener "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./event.js'"),s(`

`),n("span",{class:"token comment"},"// \u6309\u7167\u60EF\u4F8B\uFF0C\u7EC4\u5408\u5F0F\u51FD\u6570\u540D\u4EE5 use \u5F00\u5934"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"useMouse"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"// \u88AB\u7EC4\u5408\u5F0F\u5C01\u88C5\u548C\u7BA1\u7406\u7684\u72B6\u6001"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" x "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"ref"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" y "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"ref"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),s(`

  `),n("span",{class:"token function"},"useEventListener"),n("span",{class:"token punctuation"},"("),s("window"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'mousemove'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"event"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    x`),n("span",{class:"token punctuation"},"."),s("value "),n("span",{class:"token operator"},"="),s(" event"),n("span",{class:"token punctuation"},"."),s(`pageX
    y`),n("span",{class:"token punctuation"},"."),s("value "),n("span",{class:"token operator"},"="),s(" event"),n("span",{class:"token punctuation"},"."),s(`pageY
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

  `),n("span",{class:"token comment"},"// expose managed state as return value"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(" x"),n("span",{class:"token punctuation"},","),s(" y "),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br")])],-1),B=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" onMounted"),n("span",{class:"token punctuation"},","),s(" onUnmounted "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'vue'"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"useEventListener"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("target"),n("span",{class:"token punctuation"},","),s(" event"),n("span",{class:"token punctuation"},","),s(" callback")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"onMounted"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(" target"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"addEventListener"),n("span",{class:"token punctuation"},"("),s("event"),n("span",{class:"token punctuation"},","),s(" callback"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token function"},"onUnmounted"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(" target"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"removeEventListener"),n("span",{class:"token punctuation"},"("),s("event"),n("span",{class:"token punctuation"},","),s(" callback"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br")])],-1),h=n("h2",{id:"\u5F02\u6B65\u72B6\u6001\u793A\u4F8B",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5F02\u6B65\u72B6\u6001\u793A\u4F8B","aria-hidden":"true"},"#"),s(" \u5F02\u6B65\u72B6\u6001\u793A\u4F8B")],-1),D=n("p",null,[n("code",null,"useMouse()"),s(" \u7EC4\u5408\u5F0F\u51FD\u6570\u6CA1\u6709\u63A5\u6536\u4EFB\u4F55\u53C2\u6570\uFF0C\u56E0\u6B64\u8BA9\u6211\u4EEC\u518D\u6765\u770B\u4E00\u4E2A\u9700\u8981\u63A5\u6536\u4E00\u4E2A\u53C2\u6570\u7684\u7EC4\u5408\u5F0F\u51FD\u6570\u793A\u4F8B\u3002 \u5728\u505A\u5F02\u6B65\u6570\u636E\u8BF7\u6C42\u65F6\uFF0C\u6211\u4EEC\u5E38\u5E38\u9700\u8981\u5904\u7406\u4E0D\u540C\u7684\u72B6\u6001\uFF1A\u52A0\u8F7D\u4E2D\u3001\u52A0\u8F7D\u6210\u529F\u548C\u52A0\u8F7D\u5931\u8D25\u3002")],-1),F=n("div",{class:"language-vue ext-vue line-numbers-mode"},[n("pre",{class:"language-vue"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("script")]),s(),n("span",{class:"token attr-name"},"setup"),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"},[n("span",{class:"token language-javascript"},[s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" ref"),n("span",{class:"token punctuation"},","),s(" computed "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'vue'"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" useFetch "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./useFetch.js'"),s(`

`),n("span",{class:"token keyword"},"const"),s(" baseUrl "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'https://jsonplaceholder.typicode.com/todos/'"),s(`
`),n("span",{class:"token keyword"},"const"),s(" id "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"ref"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'1'"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"const"),s(" url "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"computed"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(" baseUrl "),n("span",{class:"token operator"},"+"),s(" id"),n("span",{class:"token punctuation"},"."),s("value"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" data"),n("span",{class:"token punctuation"},","),s(" error"),n("span",{class:"token punctuation"},","),s(" retry "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"useFetch"),n("span",{class:"token punctuation"},"("),s("url"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("script")]),n("span",{class:"token punctuation"},">")]),s(`

`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("template")]),n("span",{class:"token punctuation"},">")]),s(`
Load todo id: 
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("button")]),s(),n("span",{class:"token attr-name"},"v-for"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("i in 5"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"@click"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("id = i"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s("{{ i }}"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("button")]),n("span",{class:"token punctuation"},">")]),s(`

`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("div")]),s(),n("span",{class:"token attr-name"},"v-if"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("error"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("p")]),n("span",{class:"token punctuation"},">")]),s("Oops! Error encountered: {{ error.message }}"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("p")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("button")]),s(),n("span",{class:"token attr-name"},"@click"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("retry"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s("Retry"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("button")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("div")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("div")]),s(),n("span",{class:"token attr-name"},"v-else-if"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("data"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
  Data Loaded:
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("pre")]),n("span",{class:"token punctuation"},">")]),s("{{ data }}"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("pre")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("div")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("div")]),s(),n("span",{class:"token attr-name"},"v-else"),n("span",{class:"token punctuation"},">")]),s("Loading..."),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("div")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("template")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br")])],-1),y=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" ref"),n("span",{class:"token punctuation"},","),s(" isRef"),n("span",{class:"token punctuation"},","),s(" unref"),n("span",{class:"token punctuation"},","),s(" watchEffect "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'vue'"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"useFetch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"url"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" data "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"ref"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" error "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"ref"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},")"),s(`

  `),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"doFetch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// reset state before fetching.."),s(`
    data`),n("span",{class:"token punctuation"},"."),s("value "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"null"),s(`
    error`),n("span",{class:"token punctuation"},"."),s("value "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"null"),s(`

    `),n("span",{class:"token comment"},"// unref() unwraps potential refs"),s(`
    `),n("span",{class:"token function"},"fetch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"unref"),n("span",{class:"token punctuation"},"("),s("url"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"then"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"res"),s(),n("span",{class:"token operator"},"=>"),s(" res"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"json"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"then"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"json"),s(),n("span",{class:"token operator"},"=>"),s(" data"),n("span",{class:"token punctuation"},"."),s("value "),n("span",{class:"token operator"},"="),s(" json"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"error"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"err"),s(),n("span",{class:"token operator"},"=>"),s(" error"),n("span",{class:"token punctuation"},"."),s("value "),n("span",{class:"token operator"},"="),s(" err"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"isRef"),n("span",{class:"token punctuation"},"("),s("url"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// setup reactive re-fetch if input URL is a ref"),s(`
    `),n("span",{class:"token comment"},"// \u82E5\u8F93\u5165\u7684 URL \u662F\u4E00\u4E2A ref\uFF0C\u90A3\u4E48\u542F\u52A8\u4E00\u4E2A\u54CD\u5E94\u5F0F\u7684\u8BF7\u6C42"),s(`
    `),n("span",{class:"token function"},"watchEffect"),n("span",{class:"token punctuation"},"("),s("doFetch"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// otherwise, just fetch once"),s(`
    `),n("span",{class:"token comment"},"// and avoid the overhead of a watcher"),s(`
    `),n("span",{class:"token comment"},"// \u907F\u514D\u76D1\u542C\u5668\u7684\u989D\u5916\u5F00\u9500"),s(`
    `),n("span",{class:"token function"},"doFetch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(" data"),n("span",{class:"token punctuation"},","),s(" error"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"retry"),n("span",{class:"token operator"},":"),s(" doFetch "),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br")])],-1),A=n("p",null,"\u8FD9\u4E2A\u7248\u672C\u7684 useFetch() \u73B0\u5728\u540C\u65F6\u53EF\u4EE5\u63A5\u6536\u9759\u6001\u7684 URL \u5B57\u7B26\u4E32\u548C URL \u5B57\u7B26\u4E32\u7684 ref\u3002 \u5F53\u901A\u8FC7 isRef() \u68C0\u6D4B\u5230 URL \u662F\u4E00\u4E2A\u52A8\u6001 ref \u65F6\uFF0C\u5B83\u4F1A\u4F7F\u7528 watchEffect() \u542F\u52A8\u4E00\u4E2A\u54CD\u5E94\u5F0F\u7684 effect\u3002 \u8BE5 effect \u4F1A\u7ACB\u523B\u6267\u884C\u4E00\u6B21\uFF0C\u5E76\u5728\u6B64\u8FC7\u7A0B\u4E2D\u5C06 URL \u7684 ref \u4F5C\u4E3A\u4F9D\u8D56\u8FDB\u884C\u8DDF\u8E2A\u3002 \u5F53 URL \u7684 ref \u53D1\u751F\u6539\u53D8\u65F6\uFF0C\u6570\u636E\u5C31\u4F1A\u88AB\u91CD\u7F6E\uFF0C\u5E76\u91CD\u65B0\u8BF7\u6C42\u3002",-1),w=n("h2",{id:"\u7EA6\u5B9A\u548C\u6700\u4F73\u5B9E\u8DF5",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u7EA6\u5B9A\u548C\u6700\u4F73\u5B9E\u8DF5","aria-hidden":"true"},"#"),s(" \u7EA6\u5B9A\u548C\u6700\u4F73\u5B9E\u8DF5")],-1),_=n("h3",{id:"\u547D\u540D",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u547D\u540D","aria-hidden":"true"},"#"),s(" \u547D\u540D")],-1),x=n("p",null,[s("\u7EC4\u5408\u5F0F\u51FD\u6570\u7EA6\u5B9A\u7528\u9A7C\u5CF0\u547D\u540D\u6CD5\u547D\u540D\uFF0C\u5E76\u4EE5 "),n("code",null,"use"),s(" \u4F5C\u4E3A\u5F00\u5934\u3002")],-1);function j(L,M){const e=p("CodeGroupItem"),o=p("CodeGroup"),c=p("Playground");return l(),u(r,null,[b,a(c,{title:"\u9F20\u6807\u8DDF\u8E2A\u5668\u793A\u4F8B",id:"playground-382ee14d",settings:"%7B%7D",config:"%7B%22App.vue%22%3A%7B%22lang%22%3A%22vue%22%2C%22content%22%3A%22%3Cscript%20setup%3E%5Cnimport%20%7B%20useMouse%20%7D%20from%20'.%2Fmouse.js'%5Cn%5Cnconst%20%7B%20x%2C%20y%20%7D%20%3D%20useMouse()%5Cn%3C%2Fscript%3E%5Cn%5Cn%3Ctemplate%3E%5Cn%20%20Mouse%20position%20is%20at%20%7B%7B%20x%20%7D%7D%2C%20%7B%7B%20y%20%7D%7D%5Cn%3C%2Ftemplate%3E%5Cn%22%7D%2C%22mouse.js%22%3A%7B%22lang%22%3A%22js%22%2C%22content%22%3A%22import%20%7B%20ref%2C%20onMounted%2C%20onUnmounted%20%7D%20from%20'vue'%5Cn%5Cn%2F%2F%20%E6%8C%89%E7%85%A7%E6%83%AF%E4%BE%8B%EF%BC%8C%E7%BB%84%E5%90%88%E5%BC%8F%E5%87%BD%E6%95%B0%E5%90%8D%E4%BB%A5%20use%20%E5%BC%80%E5%A4%B4%5Cnexport%20function%20useMouse()%20%7B%5Cn%20%20%2F%2F%20%E8%A2%AB%E7%BB%84%E5%90%88%E5%BC%8F%E5%B0%81%E8%A3%85%E5%92%8C%E7%AE%A1%E7%90%86%E7%9A%84%E7%8A%B6%E6%80%81%5Cn%20%20const%20x%20%3D%20ref(0)%5Cn%20%20const%20y%20%3D%20ref(0)%5Cn%5Cn%20%20%2F%2F%20%E7%BB%84%E5%90%88%E5%BC%8F%E5%87%BD%E6%95%B0%E5%8F%AF%E4%BB%A5%E9%9A%8F%E6%97%B6%E6%94%B9%E5%8F%98%E5%85%B6%E7%AE%A1%E7%90%86%E7%9A%84%E7%8A%B6%E6%80%81%5Cn%20%20const%20update%20%3D%20(event)%20%3D%3E%20%7B%5Cn%20%20%20%20x.value%20%3D%20event.pageX%5Cn%20%20%20%20y.value%20%3D%20event.pageY%5Cn%20%20%7D%5Cn%5Cn%20%20%2F%2F%20a%20composable%20can%20also%20hook%20into%20its%20owner%20component's%5Cn%20%20%2F%2F%20lifecycle%20to%20setup%20and%20teardown%20side%20effects.%5Cn%20%20onMounted(()%20%3D%3E%20%7B%5Cn%20%20%20%20window.addEventListener('mousemove'%2C%20update)%5Cn%20%20%7D)%5Cn%20%20onUnmounted(()%20%3D%3E%20%7B%5Cn%20%20%20%20window.removeEventListener('mousemove'%2C%20update)%5Cn%20%20%7D)%5Cn%5Cn%20%20%2F%2F%20expose%20managed%20state%20as%20return%20value%5Cn%20%20return%20%7B%20x%2C%20y%20%7D%5Cn%7D%5Cn%22%7D%7D"},{default:t(()=>[a(o,null,{default:t(()=>[a(e,{title:"App.vue"},{default:t(()=>[d]),_:1}),a(e,{title:"mouse.js"},{default:t(()=>[C]),_:1})]),_:1})]),_:1}),f,E,a(c,{title:"\u9F20\u6807\u8DDF\u8E2A\u5668\u793A\u4F8B \u5D4C\u5957\u8C03\u7528",id:"playground-382ee187",settings:"%7B%7D",config:"%7B%22App.vue%22%3A%7B%22lang%22%3A%22vue%22%2C%22content%22%3A%22%3Cscript%20setup%3E%5Cnimport%20%7B%20useMouse%20%7D%20from%20'.%2Fmouse.js'%5Cn%5Cnconst%20%7B%20x%2C%20y%20%7D%20%3D%20useMouse()%5Cn%3C%2Fscript%3E%5Cn%5Cn%3Ctemplate%3E%5Cn%20%20Mouse%20position%20is%20at%20%7B%7B%20x%20%7D%7D%2C%20%7B%7B%20y%20%7D%7D%5Cn%3C%2Ftemplate%3E%5Cn%22%7D%2C%22mouse.js%22%3A%7B%22lang%22%3A%22js%22%2C%22content%22%3A%22import%20%7B%20ref%2C%20onMounted%2C%20onUnmounted%20%7D%20from%20'vue'%5Cnimport%20%7B%20useEventListener%20%7D%20from%20'.%2Fevent.js'%5Cn%5Cn%2F%2F%20%E6%8C%89%E7%85%A7%E6%83%AF%E4%BE%8B%EF%BC%8C%E7%BB%84%E5%90%88%E5%BC%8F%E5%87%BD%E6%95%B0%E5%90%8D%E4%BB%A5%20use%20%E5%BC%80%E5%A4%B4%5Cnexport%20function%20useMouse()%20%7B%5Cn%20%20%2F%2F%20%E8%A2%AB%E7%BB%84%E5%90%88%E5%BC%8F%E5%B0%81%E8%A3%85%E5%92%8C%E7%AE%A1%E7%90%86%E7%9A%84%E7%8A%B6%E6%80%81%5Cn%20%20const%20x%20%3D%20ref(0)%5Cn%20%20const%20y%20%3D%20ref(0)%5Cn%5Cn%20%20useEventListener(window%2C%20'mousemove'%2C%20(event)%20%3D%3E%20%7B%5Cn%20%20%20%20x.value%20%3D%20event.pageX%5Cn%20%20%20%20y.value%20%3D%20event.pageY%5Cn%20%20%7D)%5Cn%5Cn%20%20%2F%2F%20expose%20managed%20state%20as%20return%20value%5Cn%20%20return%20%7B%20x%2C%20y%20%7D%5Cn%7D%5Cn%22%7D%2C%22event.js%22%3A%7B%22lang%22%3A%22js%22%2C%22content%22%3A%22import%20%7B%20onMounted%2C%20onUnmounted%20%7D%20from%20'vue'%5Cn%5Cnexport%20function%20useEventListener(target%2C%20event%2C%20callback)%20%7B%5Cn%20%20onMounted(()%20%3D%3E%20target.addEventListener(event%2C%20callback))%5Cn%20%20onUnmounted(()%20%3D%3E%20target.removeEventListener(event%2C%20callback))%5Cn%7D%5Cn%22%7D%7D"},{default:t(()=>[a(o,null,{default:t(()=>[a(e,{title:"App.vue"},{default:t(()=>[v]),_:1}),a(e,{title:"mouse.js"},{default:t(()=>[g]),_:1}),a(e,{title:"event.js"},{default:t(()=>[B]),_:1})]),_:1})]),_:1}),h,D,a(c,{title:"\u5F02\u6B65\u72B6\u6001\u793A\u4F8B",id:"playground-382ee1c4",settings:"%7B%7D",config:"%7B%22App.vue%22%3A%7B%22lang%22%3A%22vue%22%2C%22content%22%3A%22%3Cscript%20setup%3E%5Cnimport%20%7B%20ref%2C%20computed%20%7D%20from%20'vue'%5Cnimport%20%7B%20useFetch%20%7D%20from%20'.%2FuseFetch.js'%5Cn%5Cnconst%20baseUrl%20%3D%20'https%3A%2F%2Fjsonplaceholder.typicode.com%2Ftodos%2F'%5Cnconst%20id%20%3D%20ref('1')%5Cnconst%20url%20%3D%20computed(()%20%3D%3E%20baseUrl%20%2B%20id.value)%5Cn%5Cnconst%20%7B%20data%2C%20error%2C%20retry%20%7D%20%3D%20useFetch(url)%5Cn%3C%2Fscript%3E%5Cn%5Cn%3Ctemplate%3E%5CnLoad%20todo%20id%3A%20%5Cn%3Cbutton%20v-for%3D%5C%22i%20in%205%5C%22%20%40click%3D%5C%22id%20%3D%20i%5C%22%3E%7B%7B%20i%20%7D%7D%3C%2Fbutton%3E%5Cn%5Cn%3Cdiv%20v-if%3D%5C%22error%5C%22%3E%5Cn%20%20%3Cp%3EOops!%20Error%20encountered%3A%20%7B%7B%20error.message%20%7D%7D%3C%2Fp%3E%5Cn%20%20%3Cbutton%20%40click%3D%5C%22retry%5C%22%3ERetry%3C%2Fbutton%3E%5Cn%3C%2Fdiv%3E%5Cn%3Cdiv%20v-else-if%3D%5C%22data%5C%22%3E%5Cn%20%20Data%20Loaded%3A%5Cn%20%20%3Cpre%3E%7B%7B%20data%20%7D%7D%3C%2Fpre%3E%5Cn%3C%2Fdiv%3E%5Cn%3Cdiv%20v-else%3ELoading...%3C%2Fdiv%3E%5Cn%3C%2Ftemplate%3E%5Cn%22%7D%2C%22useFetch.js%22%3A%7B%22lang%22%3A%22js%22%2C%22content%22%3A%22import%20%7B%20ref%2C%20isRef%2C%20unref%2C%20watchEffect%20%7D%20from%20'vue'%5Cn%5Cnexport%20function%20useFetch(url)%20%7B%5Cn%20%20const%20data%20%3D%20ref(null)%5Cn%20%20const%20error%20%3D%20ref(null)%5Cn%5Cn%20%20function%20doFetch()%20%7B%5Cn%20%20%20%20%2F%2F%20reset%20state%20before%20fetching..%5Cn%20%20%20%20data.value%20%3D%20null%5Cn%20%20%20%20error.value%20%3D%20null%5Cn%5Cn%20%20%20%20%2F%2F%20unref()%20unwraps%20potential%20refs%5Cn%20%20%20%20fetch(unref(url))%5Cn%20%20%20%20%20%20.then(res%20%3D%3E%20res.json())%5Cn%20%20%20%20%20%20.then(json%20%3D%3E%20data.value%20%3D%20json)%5Cn%20%20%20%20%20%20.error(err%20%3D%3E%20error.value%20%3D%20err)%5Cn%20%20%7D%5Cn%5Cn%20%20if%20(isRef(url))%20%7B%5Cn%20%20%20%20%2F%2F%20setup%20reactive%20re-fetch%20if%20input%20URL%20is%20a%20ref%5Cn%20%20%20%20%2F%2F%20%E8%8B%A5%E8%BE%93%E5%85%A5%E7%9A%84%20URL%20%E6%98%AF%E4%B8%80%E4%B8%AA%20ref%EF%BC%8C%E9%82%A3%E4%B9%88%E5%90%AF%E5%8A%A8%E4%B8%80%E4%B8%AA%E5%93%8D%E5%BA%94%E5%BC%8F%E7%9A%84%E8%AF%B7%E6%B1%82%5Cn%20%20%20%20watchEffect(doFetch)%5Cn%20%20%7D%20else%20%7B%5Cn%20%20%20%20%2F%2F%20otherwise%2C%20just%20fetch%20once%5Cn%20%20%20%20%2F%2F%20and%20avoid%20the%20overhead%20of%20a%20watcher%5Cn%20%20%20%20%2F%2F%20%E9%81%BF%E5%85%8D%E7%9B%91%E5%90%AC%E5%99%A8%E7%9A%84%E9%A2%9D%E5%A4%96%E5%BC%80%E9%94%80%5Cn%20%20%20%20doFetch()%5Cn%20%20%7D%5Cn%5Cn%20%20return%20%7B%20data%2C%20error%2C%20retry%3A%20doFetch%20%7D%5Cn%7D%5Cn%22%7D%7D"},{default:t(()=>[a(o,null,{default:t(()=>[a(e,{title:"App.vue"},{default:t(()=>[F]),_:1}),a(e,{title:"useFetch.js"},{default:t(()=>[y]),_:1})]),_:1})]),_:1}),A,w,_,x],64)}var V=k(m,[["render",j],["__file","composables.html.vue"]]);export{V as default};
