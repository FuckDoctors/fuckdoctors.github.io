import{_ as s,c as e,b as t,a,e as n,d as o,o as c}from"./app-D5yW6ZW2.js";const p={},l=a("h1",{id:"运行自己的-algolia",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#运行自己的-algolia"},[a("span",null,"运行自己的 algolia")])],-1),i=a("p",null,[n("使用 Algolia DocSearch 可以实现全文检索，对于搜索信息特别方便。"),a("br"),n(" 参考 Hope 提供的"),a("a",{href:"https://vuepress-theme-hope.github.io/v2/zh/guide/feature/search.html#%E4%BD%BF%E7%94%A8-vuepress-docsearch",target:"_blank",rel:"noopener noreferrer"},"使用 @vuepress/docsearch"),n("。")],-1),r=o(`<p>提交 DocSearch 申请可能需要等待一段时间（我提交申请到最终下来花了 4 天），在申请下来之前，也体验下效果，自己使用旧版的方式爬取了内容。<br> 申请下来之后，使用 Crawler 更方便，所以之前的旧方式就不再用了。为了保留记录，写成一篇文章。</p><p>旧方式使用 Github Actions 做定期爬虫：</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> Algolia Docsearch Action

<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> main
    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&#39;docs/algolia-config-hope.json&#39;</span> <span class="token comment"># 当配置文件有变时，执行爬虫程序</span>

  <span class="token key atrule">schedule</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">cron</span><span class="token punctuation">:</span> <span class="token string">&#39;0 18 * * *&#39;</span> <span class="token comment"># Runs at 18:00 UTC every day, 02:00 UTC+8</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">algolia</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">name</span><span class="token punctuation">:</span> algolia<span class="token punctuation">-</span>crawler
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> crawling
        <span class="token comment"># the \`uses&#39; attribute must be a path, a Docker image, or owner/repo@ref</span>
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> darrenjennings/algolia<span class="token punctuation">-</span>docsearch<span class="token punctuation">-</span>action@master
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">algolia_api_key</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.ALGOLIA_API_KEY <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">algolia_application_id</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.ALGOLIA_APPLICATION_ID <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token comment"># needs to be inside $GITHUB_WORKSPACE from actions/checkout step</span>
          <span class="token key atrule">file</span><span class="token punctuation">:</span> docs/algolia<span class="token punctuation">-</span>config<span class="token punctuation">-</span>hope.json <span class="token comment"># 配置文件</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3);function u(d,m){return c(),e("div",null,[l,i,t(" more "),r])}const h=s(p,[["render",u],["__file","run-algolia-docsearch-from-code.html.vue"]]),v=JSON.parse('{"path":"/posts/devops/run-algolia-docsearch-from-code.html","title":"运行自己的 algolia","lang":"zh-CN","frontmatter":{"article":true,"date":"2022-04-13T00:00:00.000Z","category":["devops"],"tag":["devops","ci/cd"],"head":[["meta",{"name":"description","content":"运行自己的algolia"}],["meta",{"property":"og:url","content":"https://www.zhaobc.site/posts/devops/run-algolia-docsearch-from-code.html"}],["meta",{"property":"og:site_name","content":"赵斌的小站"}],["meta",{"property":"og:title","content":"运行自己的 algolia"}],["meta",{"property":"og:description","content":"使用 Algolia DocSearch 可以实现全文检索，对于搜索信息特别方便。 参考 Hope 提供的使用 @vuepress/docsearch。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2022-04-18T09:59:02.000Z"}],["meta",{"property":"article:author","content":"Zhao Bin"}],["meta",{"property":"article:tag","content":"devops"}],["meta",{"property":"article:tag","content":"ci/cd"}],["meta",{"property":"article:published_time","content":"2022-04-13T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2022-04-18T09:59:02.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"运行自己的 algolia\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-04-13T00:00:00.000Z\\",\\"dateModified\\":\\"2022-04-18T09:59:02.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Zhao Bin\\",\\"url\\":\\"zhaobc.site\\",\\"email\\":\\"hi@zhaobc.site\\"}]}"]],"description":"使用 Algolia DocSearch 可以实现全文检索，对于搜索信息特别方便。 参考 Hope 提供的使用 @vuepress/docsearch。"},"headers":[],"git":{"createdTime":1649862848000,"updatedTime":1650275942000,"contributors":[{"name":"FuckDoctors","email":"zhbchwin@163.com","commits":1},{"name":"Zhao Bin","email":"413853119@qq.com","commits":1}]},"readingTime":{"minutes":0.9,"words":270},"filePathRelative":"posts/devops/run-algolia-docsearch-from-code.md","localizedDate":"2022年4月13日","excerpt":"\\n<p>使用 Algolia DocSearch 可以实现全文检索，对于搜索信息特别方便。<br>\\n参考 Hope 提供的<a href=\\"https://vuepress-theme-hope.github.io/v2/zh/guide/feature/search.html#%E4%BD%BF%E7%94%A8-vuepress-docsearch\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">使用 @vuepress/docsearch</a>。</p>\\n","autoDesc":true}');export{h as comp,v as data};
